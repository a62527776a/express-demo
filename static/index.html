<form action="/api/file/upload" enctype="multipart/form-data" method="POST">
  <input type="file" />
  <input type="submit" />
</form>
<video height="120px" width="120px"></video>
<canvas id="myCanvas" height="500" width="500"></canvas>
<script>
  let ws = new WebSocket('ws://localhost: 8124')
  let video = document.querySelector('video')
  let canvas = document.getElementById('myCanvas')
  let ctx=canvas.getContext('2d');
  ctx.fillStyle="#000"
  ctx.fillRect(0,0,80,100)
  let params = {
    audio: true, 
    video: { 
      facingMode: "user"
    } 
  }
  navigator.mediaDevices.getUserMedia(params)
    .then((chunk) => {
      video.src = window.URL.createObjectURL(chunk)
    })
  video.addEventListener('loadeddata', function() {
    video.play();
    requestAnimationFrame(draw)
    console.log(ctx.getImageData(0, 0, 200, 200))
  });
  let draw = () => {
    requestAnimationFrame(draw)
    ctx.drawImage(video, 0, 0, 200, 200);
  }

  ws.onopen = (event) => {
    ws.send('join')
    ws.onmessage((msg) => {
      console.log(msg)
    })
  }

</script>